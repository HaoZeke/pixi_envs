* About
Development environments with ~pixi~.
** Usage
- Get ~pixi~
- Setup the upstream repository below the corresponding ~pixi.toml~.
- Profit.
** Synchronization
For some reason, instead of using a bunch of hand-rolled ~rsync~ commands to
push and pull from remote machines in an ad-hoc set of ~pixi~ tasks, we use
[[https://mutagen.io/documentation/introduction/configuration/][mutagen]]. Basically this provides real-time, bi-directional syncing and handles
SSH connections automatically.

The configuration involves leaking SSH hosts and paths, so it is stored in the
encrypted vault (along with other sensitive files). Filenames and contents are
both opaque in git â€” see ~.vault/~.

#+begin_src bash
# Decrypt all vault-tracked files
pixi run unseal

# After editing sensitive files, re-encrypt them
pixi run seal

# Check which files are modified vs the vault
pixi run vault-status

# List all vault-tracked files
pixi run vault-list

# Add a new file to the vault
pixi run -- nim r scripts/vault.nim add path/to/file

# Remove a file from the vault
pixi run -- nim r scripts/vault.nim rm path/to/file
#+end_src
*** Usage
Instead of running a script manually, we manage the daemon:
#+BEGIN_SRC sh
# Start the background daemon (idempotent)
mutagen project start

# Monitor status (Check for conflicts or sync speed)
mutagen sync monitor

# View possible conflicts
mutagen project list

# Force a sync (e.g., after a remote run before closing laptop)
mutagen project flush

# Check conflicts
mutagen sync list -l

# Stop the daemon
mutagen project terminate
#+END_SRC
** Similar projects
Conceptually this follows a series of out-of-build experiments:
- [[https://github.com/HaoZeke/openblas_buildsys_snips][OpenBLAS build snippets]] :: Which was used to work on ~meson~ [[https://github.com/mesonbuild/wrapdb/pull/1734][bindings to OpenBLAS]]
- [[https://github.com/rgommers/pixi-dev-scipystack][pixi-dev-scipystack]] :: out-of-tree environments for the scientific python ecosystem
** Rationale
A good explanation of why this might be useful is [[https://github.com/rgommers/pixi-dev-scipystack/issues/25#issuecomment-2785474689][noted here]].
* License
MIT.
